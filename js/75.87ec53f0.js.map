{"version":3,"file":"js/75.87ec53f0.js","mappings":"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","sources":["webpack://toutiao-m/./src/components/article-item/index.vue?fc63","webpack://toutiao-m/./src/api/report.js","webpack://toutiao-m/src/components/article-item/index.vue","webpack://toutiao-m/./src/components/article-item/index.vue?65ab","webpack://toutiao-m/./src/components/article-item/index.vue","webpack://toutiao-m/./src/views/search/searchResult.vue?82f9","webpack://toutiao-m/src/views/search/searchResult.vue","webpack://toutiao-m/./src/views/search/searchResult.vue?5c58","webpack://toutiao-m/./src/views/search/searchResult.vue","webpack://toutiao-m/./src/api/article.js","webpack://toutiao-m/./src/api/search.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-cell',{attrs:{\"clickable\":\"\"}},[_c('div',{staticClass:\"title van-multi-ellipsis--l2\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(_vm._s(_vm.article.title))]),_c('div',{attrs:{\"slot\":\"label\"},slot:\"label\"},[(_vm.article.cover.type === 3)?_c('div',{staticClass:\"cover-wrap\"},_vm._l((_vm.article.cover.images),function(img,index){return _c('van-image',{key:index,attrs:{\"fit\":\"cover\",\"src\":img,\"lazy-load\":\"\"}},[_c('van-loading',{attrs:{\"slot\":\"loading\",\"type\":\"spinner\",\"size\":\"20\",\"vertical\":\"\"},slot:\"loading\"}),_c('text',{attrs:{\"slot\":\"error\"},slot:\"error\"},[_vm._v(\"加载失败\")])],1)}),1):_vm._e(),_c('div',{staticClass:\"lable-info-wrap\",class:{ hide: !_vm.hide }},[_c('span',[_vm._v(_vm._s(_vm.article.aut_name))]),_c('span',[_vm._v(_vm._s(_vm.article.comm_count))]),_c('span',[_vm._v(_vm._s(_vm._f(\"relativeTime\")(_vm.article.pubdate)))])])]),(_vm.article.cover.type === 1)?_c('van-image',{staticClass:\"right-cover\",attrs:{\"slot\":\"default\",\"fit\":\"cover\",\"src\":_vm.article.cover.images[0],\"lazy-load\":\"\"},slot:\"default\"},[_c('van-loading',{attrs:{\"slot\":\"loading\",\"type\":\"spinner\",\"size\":\"20\",\"vertical\":\"\"},slot:\"loading\"}),_c('text',{attrs:{\"slot\":\"error\"},slot:\"error\"},[_vm._v(\"加载失败\")])],1):_vm._e(),(_vm.hide)?_c('div',{staticClass:\"toutiao toutiao-guanbi\",attrs:{\"slot\":\"right-icon\"},on:{\"click\":function($event){$event.stopPropagation();_vm.show = true}},slot:\"right-icon\"}):_vm._e()],1),_c('van-action-sheet',{attrs:{\"actions\":_vm.actions,\"get-container\":\"body\",\"cancel-text\":_vm.bottomText,\"lazy-render\":\"\"},on:{\"cancel\":_vm.cancelFn,\"select\":_vm.onSelect,\"close\":_vm.closeFn},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// 统一封装，便于修改\r\nexport const firstActions = [{ name: '不感兴趣' }, { name: '反馈垃圾内容' }]\r\nexport const secondActions = [\r\n  {\r\n    value: 0,\r\n    name: '其他问题'\r\n  },\r\n  {\r\n    value: 1,\r\n    name: '标题夸张'\r\n  },\r\n  {\r\n    value: 2,\r\n    name: '色情低俗'\r\n  },\r\n  {\r\n    value: 3,\r\n    name: '错别字多'\r\n  },\r\n  {\r\n    value: 4,\r\n    name: '旧闻重复'\r\n  },\r\n  {\r\n    value: 5,\r\n    name: '广告软文'\r\n  },\r\n  {\r\n    value: 6,\r\n    name: '内容不实'\r\n  },\r\n  {\r\n    value: 7,\r\n    name: '涉嫌违规犯罪'\r\n  },\r\n  {\r\n    value: 8,\r\n    name: '侵权'\r\n  }\r\n]\r\n","<template>\r\n  <div>\r\n    <!-- <van-cell @click=\"detailFn\" clickable> -->\r\n    <van-cell clickable>\r\n      <!-- 文章表题 -->\r\n      <div slot=\"title\" class=\"title van-multi-ellipsis--l2\">{{ article.title }}</div>\r\n      <div slot=\"label\">\r\n        <div class=\"cover-wrap\" v-if=\"article.cover.type === 3\">\r\n          <van-image v-for=\"(img, index) in article.cover.images\" fit=\"cover\" :src=\"img\" :key=\"index\" lazy-load>\r\n            <van-loading slot=\"loading\" type=\"spinner\" size=\"20\" vertical />\r\n            <!-- 404图片地址失效，换个提示 -->\r\n            <text slot=\"error\">加载失败</text>\r\n          </van-image>\r\n        </div>\r\n        <div class=\"lable-info-wrap\" :class=\"{ hide: !hide }\">\r\n          <span>{{ article.aut_name }}</span>\r\n          <span>{{ article.comm_count }}</span>\r\n          <span>{{ article.pubdate | relativeTime }}</span>\r\n        </div>\r\n      </div>\r\n      <van-image class=\"right-cover\" v-if=\"article.cover.type === 1\" fit=\"cover\" :src=\"article.cover.images[0]\" slot=\"default\" lazy-load>\r\n        <van-loading slot=\"loading\" type=\"spinner\" size=\"20\" vertical />\r\n        <text slot=\"error\">加载失败</text>\r\n      </van-image>\r\n      <div slot=\"right-icon\" class=\"toutiao toutiao-guanbi\" @click.stop=\"show = true\" v-if=\"hide\"></div>\r\n    </van-cell>\r\n    <!-- 反馈面板 -->\r\n    <van-action-sheet @cancel=\"cancelFn\" v-model=\"show\" :actions=\"actions\" @select=\"onSelect\" get-container=\"body\" :cancel-text=\"bottomText\" lazy-render @close=\"closeFn\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 点击反馈内容数据的切换\r\n// 监听点击事件，区分点击哪一个\r\n// 切换数据\r\n// 二级反馈取消按钮文字变为返回\r\n// 给cancel-text设置一个变量，把变量值变为返回\r\n// 点击按钮区分判断是否为返回，如果是，把actions数据源替换为firstActions,然后由数据驱动视图发生改变，返回变为取消，然后show=true可以看见\r\nimport { firstActions, secondActions } from '@/api/report'\r\n\r\n// 接口请求\r\nimport { UnlikeArticles, FeedbackArticles } from '@/api/article'\r\nexport default {\r\n  name: 'ArticleItem',\r\n  props: {\r\n    article: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    onRefresh: Function,\r\n    hide: Boolean\r\n  },\r\n  data() {\r\n    return {\r\n      show: false, // 反馈面板显示或隐藏\r\n      actions: firstActions,\r\n      bottomText: '取消' // 底部按钮的文字\r\n    }\r\n  },\r\n  methods: {\r\n    async onSelect(item) {\r\n      // action // {名字}\r\n      // item // 索引值\r\n      // console.log(item)\r\n      // 默认情况下点击选项时不会自动收起\r\n      // 可以通过 close-on-click-action 属性开启自动收起\r\n      // this.show = false\r\n      // console.log(this.article)\r\n      if (item.name === '反馈垃圾内容') {\r\n        this.actions = secondActions\r\n        this.bottomText = '返回'\r\n      } else if (item.name === '不感兴趣') {\r\n        // 不感兴趣\r\n        // try catch 自己处理错误，内部throw就不会向控制台抛出打印错误，而是交给catch自定义\r\n        // try catch只捕获同步代码的异常\r\n        // await等待异步任务执行结果才往下走\r\n        try {\r\n          await UnlikeArticles(this.article.art_id)\r\n          this.$toast('将为您减少此类推荐')\r\n          this.onRefresh()\r\n          // console.log(res)\r\n        } catch (err) {}\r\n        this.show = false\r\n      } else {\r\n        // 反馈垃圾内容\r\n        try {\r\n          await FeedbackArticles({\r\n            target: this.article.art_id,\r\n            type: item.value,\r\n            remark: '无'\r\n          })\r\n          this.$toast('感谢您的反馈')\r\n          this.show = false\r\n          this.onRefresh()\r\n          // console.log(res)\r\n        } catch (err) {\r\n          // this.$toast('操作失败，稍后再试')\r\n        }\r\n      }\r\n    },\r\n    // 反馈面板\r\n    cancelFn() {\r\n      if (this.bottomText === '返回') {\r\n        this.show = true // 强制不退出\r\n        this.actions = firstActions\r\n        this.bottomText = '取消'\r\n      }\r\n    },\r\n    // 关闭面板触发事件\r\n    closeFn() {\r\n      // 方法一\r\n      this.actions = firstActions\r\n      this.bottomText = '取消'\r\n    }\r\n    // 点击跳转详情,如果不止这个组件要用，那可以把点击跳转路由的功能设置于其父组件\r\n    // detailFn() {\r\n    /*   console.log(this.article.art_id)\r\n    } */\r\n  }\r\n  /* watch: {\r\n    // 方法二\r\n    /* show(val) {\r\n      if (val === true) {\r\n        this.actions = firstActions\r\n        this.bottomText = '取消'\r\n      }\r\n    } */\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.title {\r\n  font-size: 32px;\r\n  color: #3a3a3a;\r\n  margin-bottom: 77px;\r\n  position: relative;\r\n}\r\n.van-cell__value {\r\n  flex: unset;\r\n  width: 232px;\r\n  height: 146px;\r\n  padding-left: 25px;\r\n}\r\n.right-cover {\r\n  width: 232px;\r\n  height: 130px;\r\n  margin-bottom: 51px;\r\n}\r\n.lable-info-wrap {\r\n  position: absolute;\r\n  left: 100px;\r\n  bottom: 20px;\r\n  span {\r\n    font-size: 22px;\r\n    color: #b4b4b4;\r\n    margin-right: 25px;\r\n  }\r\n}\r\n.hide {\r\n  left: 34px;\r\n}\r\n.cover-wrap {\r\n  display: flex;\r\n  position: relative;\r\n  top: -58px;\r\n  .van-image {\r\n    flex: 1;\r\n    height: 146px;\r\n    &:not(:last-child) {\r\n      padding-right: 4px;\r\n    }\r\n    .van-image__img {\r\n      width: 100%;\r\n      height: 146px;\r\n    }\r\n  }\r\n}\r\n.toutiao {\r\n  box-sizing: border-box;\r\n  position: absolute;\r\n  width: 23px;\r\n  height: 23px;\r\n  left: 35px;\r\n  bottom: 26px;\r\n  font-size: 15px;\r\n  line-height: 23px;\r\n  text-align: center;\r\n  color: #d0d0d0;\r\n  border: 2px solid #c9c9c9;\r\n  border-radius: 13px;\r\n  // font-weight: 600;\r\n  overflow: hidden;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=28300ffe&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=28300ffe&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"28300ffe\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-result\"},[_c('van-nav-bar',{staticClass:\"page-nav-bar\",attrs:{\"title\":\"搜索结果\",\"left-arrow\":\"\",\"fixed\":\"\",\"border\":false},on:{\"click-left\":function($event){return _vm.$router.replace('/search')}}}),_c('div',{staticClass:\"search-item\"},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\",\"immediate-check\":false},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(val){return _c('ArticleItem',{key:val.art_id,attrs:{\"article\":val,\"hide\":false},nativeOn:{\"click\":function($event){return _vm.detailFn(val.art_id)}}})}),1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"search-result\">\r\n    <van-nav-bar title=\"搜索结果\" class=\"page-nav-bar\" left-arrow @click-left=\"$router.replace('/search')\" fixed :border=\"false\" />\r\n    <!-- <van-cell v-for=\"(item, i) in list\" :key=\"i\" :title=\"item.title\" /> -->\r\n    <div class=\"search-item\">\r\n      <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onLoad\" :immediate-check=\"false\">\r\n        <ArticleItem v-for=\"val in list\" :key=\"val.art_id\" :article=\"val\" :hide=\"false\" @click.native=\"detailFn(val.art_id)\" />\r\n      </van-list>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { searchResult } from '@/api/search'\r\nimport ArticleItem from '@/components/article-item'\r\nexport default {\r\n  name: 'SearchResult',\r\n  props: ['value'],\r\n  data() {\r\n    return {\r\n      page: 1,\r\n      list: [],\r\n      finished: false, // 是否全部加载完成\r\n      loading: false // 加载中\r\n    }\r\n  },\r\n  async created() {\r\n    // console.log(this.value)\r\n    const { data: res } = await searchResult({\r\n      page: this.page,\r\n      q: this.value\r\n    })\r\n    this.list = res.data.results\r\n    // console.log(res)\r\n  },\r\n  components: { ArticleItem },\r\n  methods: {\r\n    async onLoad() {\r\n      if (this.list.length > 0) {\r\n        this.page++\r\n        const { data: res } = await searchResult({\r\n          page: this.page,\r\n          q: this.value\r\n        })\r\n        if (!res.data.results.length) {\r\n          // 如果返回数据没有，加载完成状态设置为true\r\n          this.finished = true\r\n        }\r\n        this.list.push(...res.data.results)\r\n        // 关闭加载中\r\n        this.loading = false\r\n        // console.log(res)\r\n      }\r\n    },\r\n    // 跳转文章详情\r\n    detailFn(id) {\r\n      // console.log(id)\r\n      this.$router.push({\r\n        path: '/article_detail',\r\n        query: {\r\n          art_id: id\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.search-result {\r\n  /deep/.van-icon-arrow-left {\r\n    color: #fff;\r\n  }\r\n  .search-item {\r\n    margin-top: 96px;\r\n    height: 93vh;\r\n    overflow-y: auto;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./searchResult.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./searchResult.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./searchResult.vue?vue&type=template&id=e8328146&scoped=true&\"\nimport script from \"./searchResult.vue?vue&type=script&lang=js&\"\nexport * from \"./searchResult.vue?vue&type=script&lang=js&\"\nimport style0 from \"./searchResult.vue?vue&type=style&index=0&id=e8328146&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e8328146\",\n  null\n  \n)\n\nexport default component.exports","// 文章请求模块\r\nimport request from '@/utils/request'\r\n// 请求获取文章列表\r\nexport const getArticles = (params) => {\r\n  return request.get('/v1_0/articles', {\r\n    params\r\n  })\r\n}\r\n// 文章反馈-不感兴趣\r\nexport const UnlikeArticles = (target) => {\r\n  return request.post('/v1_0/article/dislikes', {\r\n    target\r\n  })\r\n}\r\n// 文章反馈-反馈\r\nexport const FeedbackArticles = (obj) => {\r\n  return request.post('/v1_0/article/reports', obj)\r\n}\r\n// 文章详情\r\nexport const articleDetail = (id) => {\r\n  return request.get(`/v1_0/articles/${id}`)\r\n}\r\n// 对文章点赞\r\nexport const likeArticle = (target) => {\r\n  return request.post('/v1_0/article/likings', { target })\r\n}\r\n// 对文章取消点赞\r\nexport const disLikeArticle = (target) => {\r\n  return request.delete(`/v1_0/article/likings/${target}`)\r\n}\r\n// 文章评论列表\r\nexport const commentsList = ({ id, offset = null, limit = 10 }) => {\r\n  return request.get('/v1_0/comments', {\r\n    params: {\r\n      // axios针对param参数，如果发现键值对的值为null，会忽略此参数名和值不携带\r\n      type: 'a',\r\n      source: id,\r\n      offset,\r\n      limit\r\n    }\r\n  })\r\n}\r\n// 发表评论\r\nexport const commentsAdd = ({ id, content, artId = null }) => {\r\n  // axios请求体传参如果值为null是不会忽略这个参数的也会把参数名和值携带给后台（只有params遇到null才会忽略）\r\n  // 形参是art_id可选参数，如果逻辑页面是对文章评论，则不需要传，所以这是，内部art_id值为null就证明此次调用是针对文章评论\r\n  const obj = {\r\n    target: id,\r\n    content,\r\n    art_id: artId\r\n  }\r\n  if (!artId) {\r\n    obj.art_id = artId\r\n  }\r\n  return request.post('/v1_0/comments', obj)\r\n}\r\n// 评论点赞\r\nexport const likeComments = (target) => {\r\n  return request.post('/v1_0/comment/likings', { target })\r\n}\r\n// 取消点赞\r\nexport const disLikeComments = (target) => {\r\n  return request.delete(`/v1_0/comment/likings/${target}`)\r\n}\r\n","// 搜索接口\r\nimport request from '@/utils/request'\r\n\r\n// 关联\r\nexport const suggest = (q) =>\r\n  request.get('/v1_0/suggestion', {\r\n    params: { q }\r\n  })\r\n// 搜索结果\r\nexport const searchResult = ({ page = 1, q }) =>\r\n  request.get('/v1_0/search', {\r\n    params: {\r\n      page,\r\n      per_page: 10,\r\n      q\r\n    }\r\n  })\r\n"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","slot","_v","_s","article","title","cover","type","_l","img","index","key","_e","class","hide","aut_name","comm_count","_f","pubdate","images","on","$event","stopPropagation","show","actions","bottomText","cancelFn","onSelect","closeFn","model","value","callback","$$v","expression","staticRenderFns","firstActions","name","secondActions","props","required","onRefresh","data","methods","target","remark","component","$router","replace","finished","onLoad","loading","val","art_id","nativeOn","detailFn","page","list","q","components","ArticleItem","path","query","getArticles","params","request","UnlikeArticles","FeedbackArticles","obj","articleDetail","id","likeArticle","disLikeArticle","commentsList","offset","limit","source","commentsAdd","content","artId","likeComments","disLikeComments","suggest","searchResult","per_page"],"sourceRoot":""}