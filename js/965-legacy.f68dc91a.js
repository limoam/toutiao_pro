(self["webpackChunktoutiao_m"]=self["webpackChunktoutiao_m"]||[]).push([[965],{8414:function(t,e,n){"use strict";n.d(e,{Z:function(){return v}});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-cell",{attrs:{clickable:""}},[n("div",{staticClass:"title van-multi-ellipsis--l2",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.article.title))]),n("div",{attrs:{slot:"label"},slot:"label"},[3===t.article.cover.type?n("div",{staticClass:"cover-wrap"},t._l(t.article.cover.images,(function(e,r){return n("van-image",{key:r,attrs:{fit:"cover",src:e,"lazy-load":""}},[n("van-loading",{attrs:{slot:"loading",type:"spinner",size:"20",vertical:""},slot:"loading"}),n("text",{attrs:{slot:"error"},slot:"error"},[t._v("加载失败")])],1)})),1):t._e(),n("div",{staticClass:"lable-info-wrap",class:{hide:!t.hide}},[n("span",[t._v(t._s(t.article.aut_name))]),n("span",[t._v(t._s(t.article.comm_count))]),n("span",[t._v(t._s(t._f("relativeTime")(t.article.pubdate)))])])]),1===t.article.cover.type?n("van-image",{staticClass:"right-cover",attrs:{slot:"default",fit:"cover",src:t.article.cover.images[0],"lazy-load":""},slot:"default"},[n("van-loading",{attrs:{slot:"loading",type:"spinner",size:"20",vertical:""},slot:"loading"}),n("text",{attrs:{slot:"error"},slot:"error"},[t._v("加载失败")])],1):t._e(),t.hide?n("div",{staticClass:"toutiao toutiao-guanbi",attrs:{slot:"right-icon"},on:{click:function(e){e.stopPropagation(),t.show=!0}},slot:"right-icon"}):t._e()],1),n("van-action-sheet",{attrs:{actions:t.actions,"get-container":"body","cancel-text":t.bottomText,"lazy-render":""},on:{cancel:t.cancelFn,select:t.onSelect,close:t.closeFn},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],1)},a=[],i=n(6198),o=(n(8975),n(8309),[{name:"不感兴趣"},{name:"反馈垃圾内容"}]),s=[{value:0,name:"其他问题"},{value:1,name:"标题夸张"},{value:2,name:"色情低俗"},{value:3,name:"错别字多"},{value:4,name:"旧闻重复"},{value:5,name:"广告软文"},{value:6,name:"内容不实"},{value:7,name:"涉嫌违规犯罪"},{value:8,name:"侵权"}],c=n(4234),l={name:"ArticleItem",props:{article:{type:Object,required:!0},onRefresh:Function,hide:Boolean},data:function(){return{show:!1,actions:o,bottomText:"取消"}},methods:{onSelect:function(t){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("反馈垃圾内容"!==t.name){n.next=5;break}e.actions=s,e.bottomText="返回",n.next=28;break;case 5:if("不感兴趣"!==t.name){n.next=18;break}return n.prev=6,n.next=9,(0,c.tH)(e.article.art_id);case 9:e.$toast("将为您减少此类推荐"),e.onRefresh(),n.next=15;break;case 13:n.prev=13,n.t0=n["catch"](6);case 15:e.show=!1,n.next=28;break;case 18:return n.prev=18,n.next=21,(0,c.X)({target:e.article.art_id,type:t.value,remark:"无"});case 21:e.$toast("感谢您的反馈"),e.show=!1,e.onRefresh(),n.next=28;break;case 26:n.prev=26,n.t1=n["catch"](18);case 28:case"end":return n.stop()}}),n,null,[[6,13],[18,26]])})))()},cancelFn:function(){"返回"===this.bottomText&&(this.show=!0,this.actions=o,this.bottomText="取消")},closeFn:function(){this.actions=o,this.bottomText="取消"}}},u=l,f=n(1001),d=(0,f.Z)(u,r,a,!1,null,"28300ffe",null),v=d.exports},4965:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return v}});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-result"},[n("van-nav-bar",{staticClass:"page-nav-bar",attrs:{title:"搜索结果","left-arrow":"",fixed:"",border:!1},on:{"click-left":function(e){return t.$router.replace("/search")}}}),n("div",{staticClass:"search-item"},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e){return n("ArticleItem",{key:e.art_id,attrs:{article:e,hide:!1},nativeOn:{click:function(n){return t.detailFn(e.art_id)}}})})),1)],1)],1)},a=[],i=n(4479),o=n(6198),s=(n(8975),n(2705)),c=n(8414),l={name:"searchResult",props:["value"],data:function(){return{page:1,list:[],finished:!1,loading:!1}},created:function(){var t=this;return(0,o.Z)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,s.n)({page:t.page,q:t.value});case 2:n=e.sent,r=n.data,t.list=r.data.results;case 5:case"end":return e.stop()}}),e)})))()},components:{ArticleItem:c.Z},methods:{onLoad:function(){var t=this;return(0,o.Z)(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.list.length>0)){e.next=9;break}return t.page++,e.next=4,(0,s.n)({page:t.page,q:t.value});case 4:r=e.sent,a=r.data,a.data.results.length||(t.finished=!0),(n=t.list).push.apply(n,(0,i.Z)(a.data.results)),t.loading=!1;case 9:case"end":return e.stop()}}),e)})))()},detailFn:function(t){this.$router.push({path:"/article_detail",query:{art_id:t}})}}},u=l,f=n(1001),d=(0,f.Z)(u,r,a,!1,null,"daf45106",null),v=d.exports},1038:function(t,e,n){var r=n(2109),a=n(8457),i=n(7072),o=!i((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:o},{from:a})},4234:function(t,e,n){"use strict";n.d(e,{HA:function(){return c},IJ:function(){return f},Id:function(){return l},X:function(){return o},Zz:function(){return a},ih:function(){return v},jS:function(){return u},mx:function(){return s},tH:function(){return i},wR:function(){return d}});var r=n(5972),a=function(t){return r.Z.get("/v1_0/articles",{params:t})},i=function(t){return r.Z.post("/v1_0/article/dislikes",{target:t})},o=function(t){return r.Z.post("/v1_0/article/reports",t)},s=function(t){return r.Z.get("/v1_0/articles/".concat(t))},c=function(t){return r.Z.post("/v1_0/article/likings",{target:t})},l=function(t){return r.Z["delete"]("/v1_0/article/likings/".concat(t))},u=function(t){var e=t.id,n=t.offset,a=void 0===n?null:n,i=t.limit,o=void 0===i?10:i;return r.Z.get("/v1_0/comments",{params:{type:"a",source:e,offset:a,limit:o}})},f=function(t){var e=t.id,n=t.content,a=t.artId,i=void 0===a?null:a,o={target:e,content:n,art_id:i};return i||(o.art_id=i),r.Z.post("/v1_0/comments",o)},d=function(t){return r.Z.post("/v1_0/comment/likings",{target:t})},v=function(t){return r.Z["delete"]("/v1_0/comment/likings/".concat(t))}},2705:function(t,e,n){"use strict";n.d(e,{D:function(){return a},n:function(){return i}});var r=n(5972),a=function(t){return r.Z.get("/v1_0/suggestion",{params:{q:t}})},i=function(t){var e=t.page,n=void 0===e?1:e,a=t.q;return r.Z.get("/v1_0/search",{params:{page:n,per_page:10,q:a}})}},4479:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){if(Array.isArray(t))return r(t)}n.d(e,{Z:function(){return c}});n(2526),n(1817),n(1539),n(2165),n(8783),n(3948),n(1038);function i(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}n(7042),n(8309),n(4916),n(7601);function o(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}n(1703);function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return a(t)||i(t)||o(t)||s()}}}]);
//# sourceMappingURL=965-legacy.f68dc91a.js.map